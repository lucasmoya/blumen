<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLUMEN POS</title>
    <style>
        @font-face {
          font-family: 'MerchantCopy'; /* Puedes poner el nombre que desees para tu fuente */
          src: url('MerchantCopy.ttf') format('truetype'); /* Ajusta el nombre del archivo TTF según tu proyecto */
      }
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .menu-section {
            float: left;
            margin-right: 20px;
            display: none; /* Oculta las secciones inicialmente */
        }

        .item {
            cursor: pointer;
            padding: 10px;
            margin-bottom: 5px;
            background-color: #f2f2f2;
            border: 1px solid #ccc;
        }

        .tabs {
            margin-bottom: 10px;
        }

        .tab {
            cursor: pointer;
            padding: 10px;
            background-color: #ddd;
            border: 1px solid #ccc;
            display: inline-block;
            margin-right: 5px;
        }

        .tab-content {
            clear: both;
        }

        #boleta {
            border: 1px solid #ccc;
            padding: 10px;
            clear: both;
        }

        #pedido-list {
            list-style: none;
            padding: 0;
        }
        .mesa-tabs {
            margin-bottom: 10px;
        }

        .mesa-tab {
            cursor: pointer;
            padding: 10px;
            background-color: #ddd;
            border: 1px solid #ccc;
            display: inline-block;
            margin-right: 5px;
        }        

        .mesa-tab-selected {
        border: 2px solid #000000; 
       }

       .tab-selected {
            border: 2px solid #000000;
        }

    </style>
</head>
<body>
  <div class="mesa-tabs">
    <div class="mesa-tab" onclick="seleccionarMesa(1)">Mesa 1</div>
    <div class="mesa-tab" onclick="seleccionarMesa(2)">Mesa 2</div>
    <div class="mesa-tab" onclick="seleccionarMesa(3)">Mesa 3</div>
    <div class="mesa-tab" onclick="seleccionarMesa(4)">Mesa 4</div>
    <div class="mesa-tab" onclick="seleccionarMesa(5)">Mesa 5</div>
    <div class="mesa-tab" onclick="seleccionarMesa(6)">Mesa 6</div>
    <div class="mesa-tab" onclick="seleccionarMesa(7)">Express</div>
</div>


    <div class="tabs">
        <div class="tab" onclick="mostrarSeccion('dulces')">Dulces</div>
        <div class="tab" onclick="mostrarSeccion('salado')">Salado</div>
        <div class="tab" onclick="mostrarSeccion('tapas_mar')">Tapas & Mar</div>
        <div class="tab" onclick="mostrarSeccion('cafe')">Café</div>
        <div class="tab" onclick="mostrarSeccion('barra')">Barra</div>

    </div>

    <div id="dulces" class="menu-section">
      <h3>Dulces</h3>
      <div class="item" onclick="addItem('Media luna', 1600)">Media luna - $1.600</div>
      <div class="item" onclick="addItem('Muffin berries', 1800)">Muffin berries (arándano / frambuesa) - $1.800</div>
      <div class="item" onclick="addItem('Muffin chocolate', 2000)">Muffin chocolate - $2.000</div>
      <div class="item" onclick="addItem('Brownie', 2000)">Brownie - $2.000</div>
      <div class="item" onclick="addItem('Pie de limón', 3000)">Pie de limón - $3.000</div>
      <div class="item" onclick="addItem('Kuchen frambuesa', 3300)">Kuchen frambuesa - $3.300</div>
      <div class="item" onclick="addItem('Kuchen manzana', 3300)">Kuchen manzana - $3.300</div>
      <div class="item" onclick="addItem('Kuchen nuez', 3600)">Kuchen nuez - $3.600</div>
      <div class="item" onclick="addItem('Cheesecake', 4150)">Cheesecake - $4.150</div>
    </div>

    <div id="salado" class="menu-section">
      <h3>Salado</h3>
      <div class="item" onclick="addItem('Paila de huevo', 3800)">Paila de huevo - $3.800</div>
      <div class="item" onclick="addItem('Paila de huevo acompañada', 4500)">Paila de huevo acompañada - $4.500</div>
      <div class="item" onclick="addItem('Baguette Napolitana', 5500)">Baguette Napolitana - $5.500</div>
      <div class="item" onclick="addItem('Baguette Albahaca', 5800)">Baguette Albahaca - $5.800</div>
      <div class="item" onclick="addItem('Baguette Serrano', 6600)">Baguette Serrano - $6.600</div>
      <div class="item" onclick="addItem('Baguette Mechada', 7000)">Baguette Mechada - $7.000</div>
      <div class="item" onclick="addItem('Pizza Margarita', 14500)">Pizza Margarita - $14.500</div>
      <div class="item" onclick="addItem('Pizza Serrano', 15990)">Pizza Serrano - $15.990</div>
    </div>

    <div id="tapas_mar" class="menu-section">
      <h3>Tapas & Mar</h3>
      <div class="item" onclick="addItem('Carpaccio salmón para 1', 14500)">Carpaccio salmón para 1 - $14.500</div>
      <div class="item" onclick="addItem('Carpaccio salmón para 2', 8500)">Carpaccio salmón para 2 - $8.500</div>
      <div class="item" onclick="addItem('Camarón apanado', 13000)">Camarón apanado - $13.000</div>
      <div class="item" onclick="addItem('Macha a la parmesana', 12000)">Macha a la parmesana - $12.000</div>
      <div class="item" onclick="addItem('Pastel de jaiba', 11000)">Pastel de jaiba - $11.000</div>
      <div class="item" onclick="addItem('Cocktail de jaiba (2 tapas)', 5400)">Cocktail de jaiba (2 tapas) - $5.400</div>
      <div class="item" onclick="addItem('Tabla Serrano', 17000)">Tabla Serrano - $17.000</div>
      <div class="item" onclick="addItem('Tabla Queso', 16000)">Tabla Queso - $16.000</div>
    </div>

    <div id="cafe" class="menu-section">
      <h3>Café</h3>
      <div class="item" onclick="addItem('Café expreso simple', 1800)">Café expreso simple - $1.800</div>
      <div class="item" onclick="addItem('Café expreso doble', 2600)">Café expreso doble - $2.600</div>
      <div class="item" onclick="addItem('Café americano', 2800)">Café americano - $2.800</div>
      <div class="item" onclick="addItem('Capuccino', 2900)">Capuccino - $2.900</div>
      <div class="item" onclick="addItem('Latte', 2900)">Latte - $2.900</div>
      <div class="item" onclick="addItem('Café helado', 4300)">Café helado - $4.300</div>
      <div class="item" onclick="addItem('Té negro', 1800)">Té negro - $1.800</div>
      <div class="item" onclick="addItem('Té de hierbas', 1700)">Té de hierbas - $1.700</div>
      <div class="item" onclick="addItem('Agua 500cc.', 1800)">Agua 500cc. - $1.800</div>
      <div class="item" onclick="addItem('Jugo natural', 2800)">Jugo natural - $2.800</div>
      <div class="item" onclick="addItem('Bebida 300cc.', 2200)">Bebida 300cc. - $2.200</div>
    </div>

    <div id="barra" class="menu-section">
      <h3>Barra</h3>
      <div class="item" onclick="addItem('Cerveza lager 300cc.', 3600)">Cerveza lager 300cc. - $3.600</div>
      <div class="item" onclick="addItem('Cerveza Corona 300cc.', 4000)">Cerveza Corona 300cc. - $4.000</div>
      <div class="item" onclick="addItem('Cerveza Kunstmann 500cc.', 4700)">Cerveza Kunstmann 500cc. - $4.700</div>
      <div class="item" onclick="addItem('Copa vino tinto', 4500)">Copa vino tinto - $4.500</div>
      <div class="item" onclick="addItem('Copa vino blanco', 4500)">Copa vino blanco - $4.500</div>
      <div class="item" onclick="addItem('Espumante', 4000)">Espumante - $4.000</div>
      <div class="item" onclick="addItem('Pisco Sour', 4500)">Pisco Sour - $4.500</div>
      <div class="item" onclick="addItem('Aperol', 5500)">Aperol - $5.500</div>
      <div class="item" onclick="addItem('Ramazotti', 5600)">Ramazotti - $5.600</div>
    </div>

    <div id="boleta">
        <h2>Boleta Blumen Café & Mar</h2>
        <ul id="pedido-list"></ul>
        <p>Total: $<span id="total">0</span></p>
        <button onclick="generarRecibo()">Generar Boleta</button>
        <button onclick="borrarElementos()">Borrar Boleta</button>
    </div>

    <!-- Incluye la librería pdfmake -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/vfs_fonts.js"></script>

    <script>

        let pedidos = {}; // Un objeto para almacenar los pedidos de cada mesa
        let mesaSeleccionada = 1;

        function mostrarSeccion(seccion) {
            // Oculta todas las secciones
            const secciones = document.querySelectorAll('.menu-section');
            secciones.forEach(sec => sec.style.display = 'none');

            // Muestra la sección seleccionada
            const seccionSeleccionada = document.getElementById(seccion);
            if (seccionSeleccionada) {
                seccionSeleccionada.style.display = 'block';
            }

            // Actualiza las clases de estilo de las pestañas
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('tab-selected'));
            event.currentTarget.classList.add('tab-selected');
        }

        function seleccionarMesa(numeroMesa) {
            const mesaTabs = document.querySelectorAll('.mesa-tab');
            mesaTabs.forEach(tab => tab.classList.remove('mesa-tab-selected'));

            const selectedTab = document.querySelector(`.mesa-tab:nth-child(${numeroMesa})`);
            selectedTab.classList.add('mesa-tab-selected');

            // Actualiza la mesa seleccionada
            mesaSeleccionada = numeroMesa;

            // Si no hay pedidos para esta mesa, inicializa el objeto
            if (!pedidos[numeroMesa]) {
                pedidos[numeroMesa] = [];
            }

            // Muestra la sección de bebestibles al cambiar de mesa
            // mostrarSeccion('bebestibles');

            // Actualiza la boleta al cambiar de mesa
            actualizarBoleta();
        }

        function addItem(nombre, precio) {
            const mesaActual = pedidos[mesaSeleccionada];

            const index = mesaActual.findIndex(item => item.nombre === nombre);
            if (index !== -1) {
                mesaActual[index].cantidad++;
            } else {
                mesaActual.push({ nombre, precio, cantidad: 1 });
            }

            // Actualiza la boleta al agregar un producto
            actualizarBoleta();
        }

        function actualizarBoleta() {
            const listaPedido = document.getElementById('pedido-list');
            listaPedido.innerHTML = '';

            const mesaActual = pedidos[mesaSeleccionada];
            if (mesaActual) {
                mesaActual.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `${item.cantidad} - ${item.nombre} - $${item.precio * item.cantidad}`;
                    listaPedido.appendChild(li);
                });

                const totalElement = document.getElementById('total');
                totalElement.textContent = calcularTotal(mesaActual);
        }
    }

        function generarRecibo() {
    const mesaActual = pedidos[mesaSeleccionada];
    if (mesaActual && mesaActual.length > 0) {
        const content = {
            content: [
                { text: `Blumen Café & Mar - Mesa ${mesaSeleccionada}`, style: 'header' },
                { ul: mesaActual.map(item => `${item.cantidad} - ${item.nombre} - $${item.precio * item.cantidad}`) },
                { text: `Total: $${calcularTotal(mesaActual)}`, style: 'total' }
            ],
            styles: {
                header: {
                    fontSize: 18,
                    bold: true,
                    margin: [0, 0, 0, 10]
                },
                
                total: {
                    fontSize: 16,
                    bold: true,
                    margin: [0, 10, 0, 0]
                }
            }
        };

        const options = {
            pageSize: 'A5',
            pageMargins: [20, 30],
        };

        pdfMake.createPdf(content, options).download(`recibo_mesa_${mesaSeleccionada}.pdf`);

        // Reinicia solo la boleta de la mesa seleccionada
        reiniciarPedido(mesaSeleccionada);
    }
}

          function reiniciarPedido(numeroMesa) {
              pedidos[numeroMesa] = [];
              actualizarBoleta();
          }

          reiniciarPedido(mesaSeleccionada);


        function calcularTotal(pedidoActual) {
            return pedidoActual.reduce((total, item) => total + item.precio * item.cantidad, 0);
        }

        function borrarElementos() {
            const confirmBorrar = confirm('¿Seguro que quieres borrar la boleta?');
            if (confirmBorrar) {
                reiniciarPedido(mesaSeleccionada);
            }
        }

    </script>
</body>
</html>
